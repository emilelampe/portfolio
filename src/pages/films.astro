---
import BaseLayout from '../layouts/BaseLayout.astro';
import FilmCard from '../components/FilmCard.astro';
import { getCollection } from 'astro:content';

const films = await getCollection('films');
const sortedFilms = films.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Films | Emile Lampe">
  <section class="py-20 md:py-32">
    <div class="container">
      <div class="max-w-2xl">
        <p class="label mb-4">Filmography</p>
        <h1 class="text-4xl md:text-5xl mb-6">Films</h1>
        <div class="accent-line mb-6"></div>
        <p class="text-muted leading-relaxed">
          A collection of short films, documentaries, and visual projects exploring stories through motion and sound.
        </p>
      </div>
    </div>
  </section>

  <div class="border-t border-white/5">
    {sortedFilms.map((film, index) => (
      <FilmCard
        id={film.id}
        title={film.data.title}
        description={film.data.description}
        youtubeId={film.data.youtubeId}
        reverse={index % 2 === 1}
        index={index + 1}
      />
    ))}
  </div>

  {sortedFilms.length === 0 && (
    <div class="container py-20 text-center text-muted">
      <p>No films yet.</p>
    </div>
  )}
</BaseLayout>
