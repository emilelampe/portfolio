---
import BaseLayout from '../layouts/BaseLayout.astro';
import FilmCard from '../components/FilmCard.astro';
import { getCollection } from 'astro:content';

const films = await getCollection('films');
const sortedFilms = films.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title="Films | Emile Lampe">
  <section class="py-12 md:py-16 pb-24">
    <div class="container">
      <div class="max-w-2xl mb-12">
        <p class="label mb-4">Filmography</p>
        <h1 class="text-4xl md:text-5xl mb-6">Films</h1>
        <div class="accent-line"></div>
      </div>

      <div class="space-y-16 md:space-y-24">
        {sortedFilms.map((film, index) => (
          <FilmCard
            id={film.id}
            title={film.data.title}
            description={film.data.description}
            youtubeId={film.data.youtubeId}
            reverse={index % 2 === 1}
            index={index + 1}
          />
        ))}
      </div>

      {sortedFilms.length === 0 && (
        <p class="text-muted py-8">No films yet.</p>
      )}
    </div>
  </section>
</BaseLayout>
